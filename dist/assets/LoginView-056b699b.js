import{d as b,g as v,G as V,r as _,e as n,o as y,c as x,i as a,w as t,a as L,E as m,p as S,m as k,b as g,_ as E}from"./index-a6482bb7.js";import{u as N}from"./users-a36660c6.js";import"./http-325886a9.js";const C=r=>(S("data-v-2533fb92"),r=r(),k(),r),I={class:"page"},B=C(()=>g("div",{class:"card-header"},[g("span",null,"Login")],-1)),f="/management/category-management",P=b({__name:"LoginView",setup(r){const d=v(!1),o=V({email:"",password:""}),w=()=>{d.value=!0;var u={email:o.email,password:o.password};N(u).then(e=>{if(console.log("THEN",e),e.code!=200){m({title:"Warning",message:e.message,type:"warning"});return}else e.code==200&&(localStorage.clear(),localStorage.token=e.data.token,m({title:"Success",message:e.message,type:"success"}),_.push({path:f}))}).catch(e=>{var l,s,i,p;console.log("error",e),m({title:"Warning",message:((s=(l=e.response)==null?void 0:l.data)==null?void 0:s.detail)||((p=(i=e.response)==null?void 0:i.data)==null?void 0:p.message)||e.message,type:"warning"})}).finally(()=>{d.value=!1})};return localStorage.token&&_.push({path:f}),(u,e)=>{const l=n("el-input"),s=n("el-form-item"),i=n("el-button"),p=n("el-form"),h=n("el-card");return y(),x("div",I,[a(h,{class:"container"},{header:t(()=>[B]),default:t(()=>[a(p,{ref:"formRef",model:o,"label-width":"120px",class:"form-container","label-position":"top"},{default:t(()=>[a(s,{prop:"email",label:"Email",rules:[{required:!0,message:"Please input email address",trigger:"blur"},{type:"email",message:"Please input correct email address",trigger:["blur","change"]}]},{default:t(()=>[a(l,{modelValue:o.email,"onUpdate:modelValue":e[0]||(e[0]=c=>o.email=c)},null,8,["modelValue"])]),_:1}),a(s,{prop:"password",label:"Password"},{default:t(()=>[a(l,{modelValue:o.password,"onUpdate:modelValue":e[1]||(e[1]=c=>o.password=c),type:"password",autocomplete:"off"},null,8,["modelValue"])]),_:1}),a(s,null,{default:t(()=>[a(i,{loading:d.value,type:"primary",onClick:w},{default:t(()=>[L("Login")]),_:1},8,["loading"])]),_:1})]),_:1},8,["model"])]),_:1})])}}});const q=E(P,[["__scopeId","data-v-2533fb92"]]);export{q as default};
