import{d as P,x as S,g as r,y as z,n as B,o as _,c as x,b as n,t as D,F as E,k as L,i as N,u as T,q as A,f as U,v as b,E as k,_ as j}from"./index-a6482bb7.js";import{g as q}from"./products-3fabc7ff.js";import{P as W}from"./ProductCard-3e3a9e7f.js";import{a as G}from"./orders-c4e29b46.js";import{a as H}from"./counter-286ebb67.js";import"./http-325886a9.js";const J={class:"title"},K={class:"page-container"},M={class:"product-container"},O={class:"d-flex justify-content-center mt-4"},p=12,Q=P({__name:"FurnituresView",setup(R){const u=S(),{refreshCartItems:w}=H(),i=r(u.query.category_id),m=r(u.query.category_name),s=r(!1),d=r(!1),g=r([]),l=r(1),v=r(1),f=localStorage.getItem("usyd-customer-id");z(u,(t,e)=>{i.value=t.query.category_id,m.value=t.query.category_name,y()});const F=async t=>{d.value=!0,s.value=!0,l.value=t;var e={page_num:l.value,page_size:p,category:i.value};q(e).then(o=>{o.success&&(g.value=o.data,v.value=o.page.total)}).catch(()=>{}).finally(()=>{s.value=!1})},I=async(t,e)=>{d.value=!0,s.value=!0;var o={user_id:f,product:t.product_id,quantity:e};G(o).then(a=>{if(a.success){k({title:"Success",message:a.data.message,type:"success"});var c={user_id:f};w(c)}}).catch(a=>{var c,h,C,V;k({title:"Warning",message:((h=(c=a.response)==null?void 0:c.data)==null?void 0:h.detail)||((V=(C=a.response)==null?void 0:C.data)==null?void 0:V.message)||a.message,type:"warning"})}).finally(()=>{d.value=!1,s.value=!1})},y=()=>{s.value=!0;var t={page_num:l.value,page_size:p,category:i.value};q(t).then(e=>{e.success&&(g.value=e.data,v.value=e.page.total)}).catch(()=>{}).finally(()=>{s.value=!1})};return y(),(t,e)=>{const o=B("loading");return _(),x("div",null,[n("div",J,D(m.value.toUpperCase()),1),n("div",K,[n("div",M,[(_(!0),x(E,null,L(g.value,a=>A((_(),U(W,{product:a,key:a.product_id,onAddToCart:I},null,8,["product"])),[[o,s.value,void 0,{fullscreen:!0,lock:!0}]])),128))])]),n("div",O,[N(T(b),{modelValue:l.value,"onUpdate:modelValue":e[0]||(e[0]=a=>l.value=a),"page-size":p,total:v.value,layout:"prev, pager, next",onCurrentChange:F},null,8,["modelValue","total"])])])}}});const te=j(Q,[["__scopeId","data-v-cee92680"]]);export{te as default};
