import{S as f,T as _}from"./TablePage-fdb5559d.js";import{d as v,J as h,G as o,g as r,o as w,c as y,i as t,w as k,b as S,K as E,a as P,E as b,_ as x}from"./index-48e4bbc4.js";import{j as C,f as N}from"./users-c3030ca3.js";import"./http-0a3fdf92.js";const B={class:"div-search-bar"},D=v({__name:"UserManagementView",setup(I){h();const c=o([{name:"Name",value:""}]),n=r(!0),d=r([]),g=o([{dataKey:"id",key:"id",title:"ID",width:300},{dataKey:"username",key:"username",title:"Username",width:200},{dataKey:"email",key:"email",title:"Email",width:250},{key:"is_staff",title:"Is Staff",width:250,cellRenderer:e=>t("div",null,[e.rowData.is_staff?"YES":"NO"])},{key:"is_active",title:"Is Active",width:250,cellRenderer:e=>t("div",null,[e.rowData.is_active?"YES":"NO"])},{key:"option",title:"Options",cellRenderer:e=>t("div",null,[t(E,{link:!0,type:"primary",onClick:()=>p(e.rowData)},{default:()=>[P("Forgot Password")]})]),width:150,fixed:"right",align:"center"}]),s=o({currentPage:1,pageSize:20}),m=e=>{s.currentPage=e.currentPage,s.pageSize=e.pageSize,i()},u=r(),i=()=>{n.value=!0;var e={page_num:s.currentPage,page_size:s.pageSize,username:c[0].value};C(e).then(a=>{console.log(a),a.success&&(d.value=a.data,u.value=a.page.total)}).catch(()=>{}).finally(()=>{n.value=!1})},p=e=>{console.log(e);var a={email:e.email};N(a).then(l=>{console.log(l),l.success&&b({title:"Success",message:"Reset Email has been delievered",type:"success"})}).catch(()=>{})};return i(),(e,a)=>(w(),y("div",null,[t(_,{loading:n.value,class:"table-page",columns:g,data:d.value,itemsTotalLength:u.value,onPaginationChange:m},{default:k(()=>[S("div",B,[t(f,{items:c,onChange:a[0]||(a[0]=l=>i())},null,8,["items"])])]),_:1},8,["loading","columns","data","itemsTotalLength"])]))}});const K=x(D,[["__scopeId","data-v-f9ec2d4f"]]);export{K as default};
